(function(){!function(a){return"object"==typeof exports&&a.require?module.exports=factory(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(b,c){return factory(b||a._,c||a.Backbone)}):factory(_,Backbone)}(this,function(a,b){"use strict";var c,d,e;return e={timestamp:{color:"gray"},label:{color:"white","border-radius":"2px"},event:{color:"blue","font-weight":"bold","font-size":"110%"}},d={Model:"red",Collection:"purple",Router:"black"},c=function(b){return function(c){var f,g,h;if(this.__debugEvents=this.__debugEvents||{},c===!1)return this.off("all",this.__debugEvents.log,this);if(c!==!0&&(this.__debugEvents.prefix=c||""),"log"in this.__debugEvents){if("_events"in this&&"all"in this._events&&(g=a.some(this._events.all,function(a){return a.callback===this.__debugEvents.log&&a.context===this},this)))return}else h=a.extend(e.label,{background:d[b]}),f={timestamp:a.map(e.timestamp,function(a,b){return b+":"+a}).join(";"),label:a.map(h,function(a,b){return b+":"+a}).join(";"),event:a.map(e.event,function(a,b){return b+":"+a}).join(";")},this.__debugEvents.log=function(a){var c;return c=b,this.__debugEvents.prefix&&(c+=":"+this.__debugEvents.prefix),console.debug("%c%s %c%s%c %s",f.timestamp,(new Date).toString().match(/(\d+:\d+:\d+)/)[1],f.label," "+c+" ",f.event,a,Array.prototype.slice.call(arguments,1)),"remove"===a?this.off("all",this.__debugEvents.log,this):void 0};return this.on("all",this.__debugEvents.log,this)}},a.each(d,function(a,d){return b[d].prototype.debugEvents=c(d),b[d].prototype.initialize=function(){return this.debugEvents(this.constructor.name)}})})}).call(this);